{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="min-h-screen bg-gradient-to-b from-white to-orange-100 py-6 sm:py-8 md:py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- SATU FRAME BIRU TUA UNTUK HEADER + FILTER -->
        <div class="bg-blue-900 rounded-xl sm:rounded-2xl md:rounded-3xl shadow-lg sm:shadow-xl md:shadow-2xl p-6 sm:p-8 md:p-12 mb-6 sm:mb-8">
            <!-- Header -->
            <div class="text-center mb-6 sm:mb-8">
                <h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-3 sm:mb-4">Pertandingan</h1>
            </div>

            <!-- Filter -->
            <div class="max-w-md mx-auto">
                <div>
                    <label class="block text-sm font-medium text-white mb-2">Pilih Bulan</label>
                    <select name="month" id="monthFilter" class="w-full bg-white text-black-900 border border-blue-700 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-orange-500">
                        <option value="">Semua Bulan</option>
                        <option value="1" {% if selected_month == "1" %}selected{% endif %}>Januari</option>
                        <option value="2" {% if selected_month == "2" %}selected{% endif %}>Februari</option>
                        <option value="3" {% if selected_month == "3" %}selected{% endif %}>Maret</option>
                        <option value="4" {% if selected_month == "4" %}selected{% endif %}>April</option>
                        <option value="5" {% if selected_month == "5" %}selected{% endif %}>Mei</option>
                        <option value="6" {% if selected_month == "6" %}selected{% endif %}>Juni</option>
                        <option value="7" {% if selected_month == "7" %}selected{% endif %}>Juli</option>
                        <option value="8" {% if selected_month == "8" %}selected{% endif %}>Agustus</option>
                        <option value="9" {% if selected_month == "9" %}selected{% endif %}>September</option>
                        <option value="10" {% if selected_month == "10" %}selected{% endif %}>Oktober</option>
                        <option value="11" {% if selected_month == "11" %}selected{% endif %}>November</option>
                        <option value="12" {% if selected_month == "12" %}selected{% endif %}>Desember</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- DAFTAR PERTANDINGAN - FRAME OREN (DIPISAH SENDIRIAN) -->
        <div id="matchesContainer">
            {% include 'match_filter.html' %}
        </div>
    </div>
</div>

<script>
// AJAX script tetap
document.getElementById('monthFilter').addEventListener('change', function() {
    const month = this.value;
    const url = new URL(window.location);
    
    if (month) {
        url.searchParams.set('month', month);
    } else {
        url.searchParams.delete('month');
    }
    
    fetch(url, {
        headers: {
            'X-Requested-With': 'XMLHttpRequest'
        }
    })
    .then(response => response.text())
    .then(html => {
        window.history.pushState({}, '', url);
        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = html;
        const newContent = tempDiv.querySelector('#matchesContainer').innerHTML;
        document.getElementById('matchesContainer').innerHTML = newContent;
    })
    .catch(error => {
        console.error('Error:', error);
        window.location.href = url;
    });
});
</script>
{% endblock %}